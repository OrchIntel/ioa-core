{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "IOA Agent Onboarding Manifest Schema",
  "description": "JSON schema for validating agent onboarding manifests in the IOA system",
  "type": "object",
  "required": [
    "agent_id",
    "adapter_class", 
    "capabilities",
    "tenant_id",
    "trust_signature"
  ],
  "properties": {
    "agent_id": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9_-]*[a-zA-Z0-9]$",
      "minLength": 3,
      "maxLength": 64,
      "description": "Unique identifier for the agent"
    },
    "adapter_class": {
      "type": "string", 
      "pattern": "^[a-z_]+\\.[A-Z][a-zA-Z]+$",
      "description": "Python module and class name in format 'module.ClassName'"
    },
    "capabilities": {
      "type": "array",
      "minItems": 1,
      "maxItems": 20,
      "uniqueItems": true,
      "items": {
        "type": "string",
        "pattern": "^[a-z][a-z_]*[a-z]$",
        "minLength": 2,
        "maxLength": 32
      },
      "description": "List of agent capabilities"
    },
    "tenant_id": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9_-]*[a-zA-Z0-9]$",
      "minLength": 2,
      "maxLength": 32,
      "description": "Tenant identifier for multi-tenant isolation"
    },
    "trust_signature": {
      "type": "string",
      "pattern": "^[A-Fa-f0-9]{64}$",
      "description": "SHA-256 hash signature for trust verification"
    },
    "metadata": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "name": {
          "type": "string",
          "maxLength": 128
        },
        "description": {
          "type": "string", 
          "maxLength": 512
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "maxLength": 32
          },
          "maxItems": 10
        },
        "max_concurrent_tasks": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 1
        },
        "priority": {
          "type": "string",
          "enum": ["low", "normal", "high", "critical"],
          "default": "normal"
        },
        "environment": {
          "type": "string",
          "enum": ["development", "testing", "staging", "production"],
          "default": "development"
        }
      },
      "description": "Optional metadata for the agent"
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "agent_id": "gpt4_analyst",
      "adapter_class": "openai_adapter.OpenAIService",
      "capabilities": ["analysis", "text_generation", "reasoning"],
      "tenant_id": "default_tenant",
      "trust_signature": "a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456",
      "metadata": {
        "name": "Analysis Agent",
        "description": "Advanced analysis and reasoning agent",
        "version": "1.0.0",
        "tags": ["llm", "analysis", "ai"],
        "max_concurrent_tasks": 3,
        "priority": "high",
        "environment": "production"
      }
    }
  ]
}

